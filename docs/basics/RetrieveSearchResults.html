
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Retrieving the Search Results Â· Conjunction</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../advanced/" />
    
    
    <link rel="prev" href="ConfigureSearchQuery.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction/">
            
                <a href="../introduction/">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../introduction/Motivation.html">
            
                <a href="../introduction/Motivation.html">
            
                    
                    Motivation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../introduction/CoreConcepts.html">
            
                <a href="../introduction/CoreConcepts.html">
            
                    
                    Core Concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../introduction/Examples.html">
            
                <a href="../introduction/Examples.html">
            
                    
                    Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="CreateIndexableEntityModel.html">
            
                <a href="CreateIndexableEntityModel.html">
            
                    
                    Creating the Indexable Entity Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="ConfigureSearchQuery.html">
            
                <a href="ConfigureSearchQuery.html">
            
                    
                    Configuring the Search Query
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.3" data-path="RetrieveSearchResults.html">
            
                <a href="RetrieveSearchResults.html">
            
                    
                    Retrieving the Search Results
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../advanced/">
            
                <a href="../advanced/">
            
                    
                    Advanced
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../advanced/NestedSearchQueries.html">
            
                <a href="../advanced/NestedSearchQueries.html">
            
                    
                    Nested Search Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../advanced/CreatingCustomProviders.html">
            
                <a href="../advanced/CreatingCustomProviders.html">
            
                    
                    Creating Custom Providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../advanced/IntroducingSearchResultCaching.html">
            
                <a href="../advanced/IntroducingSearchResultCaching.html">
            
                    
                    Introducing Search Result Caching
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../faq/">
            
                <a href="../faq/">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../Troubleshooting.html">
            
                <a href="../Troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Glossary.html">
            
                <a href="../Glossary.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../api/">
            
                <a href="../api/">
            
                    
                    API Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../CHANGELOG.html">
            
                <a href="../../CHANGELOG.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Retrieving the Search Results</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="retrieving-the-search-results">Retrieving the Search Results</h1>
<p>Now that we have our indexable entity model defined and the search query configured in Sitecore, the final step is to retrieve the search results that matches the configured search query.</p>
<h2 id="the-three-providers">The Three Providers</h2>
<p>In order to retrieve the search results, we first need to configure Conjunction to use the correct configuration <em>providers</em>:</p>
<ul>
<li>Search Query Element Provider</li>
<li>Search Query Element Value Provider</li>
<li>Index Name Provider </li>
</ul>
<p>The <strong>Search Query Element Provider</strong> is resposible for retrieving a search query root from a given configuration. In this example, we want to retrieve the search query root from Sitecore, and for this we use the default Sitecore search query element provider implementation that ships with Conjunction.</p>
<p>First we need to get the search query root item from Sitecore. In this case, we simply retrieve the previously configured search query root item, by fetching the item using its ID. Once we have the search query root item, this has to get passed to the Sitecore search query element provider that will transform the configurion of the search query root item into an internal search query element representation that Conjunction can work with:</p>
<pre><code class="lang-csharp">  Item searchQueryRootItem = Sitecore.Context.Database.GetItem(<span class="hljs-string">&quot;itemId&quot;</span>);
  <span class="hljs-keyword">var</span> elementProvider = <span class="hljs-keyword">new</span> SitecoreConfiguredSearchQueryElementProvider(searchQueryRootItem);
</code></pre>
<p>For retrieving dynamically provided values used by search query rule elements, we use a different provider named a <strong>Search Query Element Value Provider</strong>. In this example, we make use of another provider implementation that comes with Conjunction, which is capable of interpreting and using the name/value pairs that comes from the query string of a web request as dynamic values for search query rules:</p>
<pre><code class="lang-csharp">  <span class="hljs-keyword">var</span> valueProvider = <span class="hljs-keyword">new</span> QueryStringSearchQueryValueProvider(Request.QueryString);
</code></pre>
<p>The last bit of configuration that has to be set up is the <strong>Index Name Provider</strong> that is used to deliver the index name that will be used when performing search queries. In this example, we specify that we want to retrieve results from the default Sitecore master/web index, using the default Sitecore index name provider within Conjunction:</p>
<pre><code class="lang-csharp">  <span class="hljs-keyword">var</span> indexNameProvider = <span class="hljs-keyword">new</span> SitecoreDefaultIndexNameProvider();
</code></pre>
<blockquote>
<p><strong>Note</strong>: For real-life project you should favor using <a href="https://soen.ghost.io/tackling-the-challenges-of-architecting-a-search-indexing-infrastructure-in-sitecore-part-2#howshouldthesearchindexesbeorganized" target="_blank"><em>domain indexes</em></a>, as they give you much smaller, yet concise and cohesive indexes to work with, thus avoiding all of the disadvantages you get by using the more simpler solution of using the default Sitecore indexes. For more information on how you can create your own custom index name provider, see the advanced section <a href="../advanced/CreatingCustomProviders.html#a-domain-index-name-provider">Creating custom providers</a>. </p>
</blockquote>
<h2 id="the-search-criteria">The Search Criteria</h2>
<p>With the configuration in place, the next step is to pass the configured providers to the <strong>Search Criteria</strong>:</p>
<pre><code class="lang-csharp">  <span class="hljs-keyword">var</span> criteria = <span class="hljs-keyword">new</span> SearchCriteria&lt;ToyBall&gt;(elementProvider, valueProvider, indexNameProvider);
</code></pre>
<p>You can think of the search criteria as a object holding information about the search query elements that describes what needs to be queried, how values needed by the search query elements can be retrieved, as well as the search index resposible for delivering the results.</p>
<h2 id="the-search-results">The Search Results</h2>
<p>Finally, we pass the search criteria to the <strong>Search Result Repository</strong> that retrieves the search result:</p>
<pre><code class="lang-csharp">  <span class="hljs-keyword">var</span> repository = <span class="hljs-keyword">new</span> SearchResultRepository();
  SearchResult&lt;ToyBall&gt; searchResult = repository.GetSearchResult(criteria);
</code></pre>
<p>When the search result repository has retrieved the search result, you can access the number of total hits found, as well as the actual hits:</p>
<pre><code class="lang-cs">  <span class="hljs-keyword">int</span> totalSearchResultCount = searchResult.TotalSearchResults; 
  IEnumerable&lt;ToyBall&gt; searchResults = searchResult.Hits;
</code></pre>
<h2 id="next-steps">Next steps</h2>
<p>We have now covered the basics of using Conjunction to create an indexable entity model, configure the search query configuration in Sitecore and retrieve the matching search results - however, we have only scratched the surface of what you can do with Conjunction. Therefore, we encourage you to continue exploring how you can achieve even more advanced scenarios, by looking at the different walkthroughs described in the <a href="../advanced/">advanced</a> section.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ConfigureSearchQuery.html" class="navigation navigation-prev " aria-label="Previous page: Configuring the Search Query">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../advanced/" class="navigation navigation-next " aria-label="Next page: Advanced">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Retrieving the Search Results","level":"1.3.3","depth":2,"next":{"title":"Advanced","level":"1.4","depth":1,"path":"docs/advanced/README.md","ref":"docs/advanced/README.md","articles":[{"title":"Nested Search Queries","level":"1.4.1","depth":2,"path":"docs/advanced/NestedSearchQueries.md","ref":"docs/advanced/NestedSearchQueries.md","articles":[]},{"title":"Creating Custom Providers","level":"1.4.2","depth":2,"path":"docs/advanced/CreatingCustomProviders.md","ref":"docs/advanced/CreatingCustomProviders.md","articles":[]},{"title":"Introducing Search Result Caching","level":"1.4.3","depth":2,"path":"docs/advanced/IntroducingSearchResultCaching.md","ref":"docs/advanced/IntroducingSearchResultCaching.md","articles":[]}]},"previous":{"title":"Configuring the Search Query","level":"1.3.2","depth":2,"path":"docs/basics/ConfigureSearchQuery.md","ref":"docs/basics/ConfigureSearchQuery.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchorjs"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"anchorjs":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Conjunction","gitbook":">=3.2.1"},"file":{"path":"docs/basics/RetrieveSearchResults.md","mtime":"2017-01-02T21:18:59.133Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-01-03T09:53:02.988Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

